#summary New features implemented in penEasy_Imaging


PenEasy_Imaging implements two majors extensions to the penEasy code:


    * *TALLY IMAGE*:

The Tally Image is a tally module to generate radiographic images as the output of the x-ray transport simulation. The images can be generated using one of three different imaging formation models, and there is also an option to disable the Monte Carlo sampling and utilize the penEasy transport routines as an analytical ray-tracing engine to generate fast, scatter- and noise-free images. The scattered radiation can be included in the final output image or can be tallied separately, differentiating photons that suffered Rayleight, Compton, or multiple scattering events in the track. The output images can be written in ASCII or in binary format. Simple GNUplot scripts are provided to visualize graphically the simulated images.

Some of the information that the user has to provide in the tally input file is the location and orientation of the detector, the size of the detector's sensitive region and the number of (virtual) pixels in which this region is divided. However, a "real" detector object (usually a thin slab of scintillator material such as CsI) has to be defined in the simulation's geometry using quadric surfaces to be able to stop the particles inside the detector. The location and orientation of the detector in the quadric geometry have to match the values given in the input file.

Sample input file of the image tally:
{{{
    [SECTION TALLY IMAGE v.2010-09-02]
    (ON )                    # STATUS (ON or OFF)
      5                      # DETECTOR MATERIAL
      1        # DETECTOR MODEL (1=eV/cm^2, 2=Optical, 3=Ideal, 4=OpticalDepth)
      0        # SCATTER OPTION (0=All, 1=Only-non-scattered, 2=Separate-scatter)
      0                      # OUTPUT FORMAT (0=ASCII, 1=Binary)
     image_model_1.dat       # OUTPUT FILE NAME (name ends at first blank)
     10.0   250              # X SIZE (cm), NUM PIXELS
     10.0   250              # Z SIZE (cm), NUM PIXELS
      0.06                   # Y SIZE (PIXEL THICKNESS)
      0.0    0.0    0.0      # EULER ANGLES (OMEGA, THETA, PHI) IN DEGREES
      0.0                    # ROLL ANGLE (detector tilt, usually 0) [deg]
      5.0   20.0    5.0      # X, Y, AND Z TRANSLATION
      0.0                    # RELATIVE UNCERTAINTY (%) REQUESTED
    [END OF IMG SECTION]
}}}
        A tally option that can create a radiographic image using various imaging formation models. Includes an option to transform the Monte Carlo simulation into an analytical ray-tracing engine. The images can be reported in ASCII or in binary format. To write the binary files the code uses a function in C, for this reason the compilation of the code requires both a Fortran and a C compiler. If a C compiler is not available, the user can comment out the code used for the binary output (functions "writefloat" and "writeus").

    * *SOURCE RECTANGULAR BEAM*:
        A source model that emits a collimated beam of radiation that will generate a square field on the detector equivalent to a field collimated with 100% attenuating blocks. The user can choose the polar and azimuthal apertures of the fan beam and also the tilting of the resulting field (by default the field is perpendicular to the XY plane). The energy spectra of the emitted fan beam is read from an external file. It is possible to define multiple energy spectra at different angles, to reproduce a bow-tie filter modulating the beam for example.

A sample simulation is provided. Read the sample input file for more details on the available options. Read also the original documentation and README from penEasy to learn how the program is executed and how the voxelized and quadric geometries are managed by the main program.